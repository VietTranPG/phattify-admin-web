<div class="card--client-list">
  <div class="row">
    <div class="col col-right">
      <button class="btn btn-warning" (click)="showAddClient()">Add</button>
    </div>
  </div>
  <div class="table-client-list">
    <table class="table table-framed table-wrap-text">
      <thead>
        <tr>
          <th><input type="checkbox" [(ngModel)]="selectAll" (change)="changeAll(selectAll)" /></th>
          <th>#</th>
          <th (click)="sortTable('FirstName')">
            <i *ngIf="this.typeOrderBoolean==false && this.selectSort=='FirstName'" class="icofont icofont-caret-up"></i>
            <i *ngIf="this.typeOrderBoolean && this.selectSort=='FirstName'" class="icofont icofont-caret-down"></i>
            First Name</th>
          <th (click)="sortTable('SurName')">
            <i *ngIf="this.typeOrderBoolean==false && this.selectSort=='SurName'" class="icofont icofont-caret-up"></i>
            <i *ngIf="this.typeOrderBoolean && this.selectSort=='SurName'" class="icofont icofont-caret-down"></i>
            Last Name</th>
          <th (click)="sortTable('Email')">
            <i *ngIf="this.typeOrderBoolean==false && this.selectSort=='Email'" class="icofont icofont-caret-up"></i>
            <i *ngIf="this.typeOrderBoolean && this.selectSort=='Email'" class="icofont icofont-caret-down"></i>
            Email</th>
          <th>Status</th>
          <th>Invited Code</th>
          <th>Date Joined</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let listMentee of listMentee;let i = index" (click) = "goToClientInfo(listMentee.Id)" class = "client">
          <td><input type="checkbox" [(ngModel)]="listMentee.checked" (change)="changeOne()" (click)="$event.stopPropagation();" /></td>
          <td>{{i+1}}</td>
          <td>{{listMentee.FirstName}}</td>
          <td>{{listMentee.SurName}}</td>
          <td>{{listMentee.Email}}</td>
          <td>{{listMentee.Status === 'deactive'? 'inactivate':listMentee.Status}}</td>
          <td>{{listMentee.VerifyCode}}</td>
          <td>{{listMentee.createdAt | date: 'dd/MM/yyyy'}}</td>
          <td>
            <button class="btn btn-danger btn-custom" (click) = "$event.stopPropagation();delete(listMentee.Id)"> <i class="icofont icofont-bin"></i></button>
            <button *ngIf="listMentee.Type =='Invite'" class="btn btn-warning btn-custom"><i class="fa fa-paper-plane-o" aria-hidden="true" (click)="$event.stopPropagation();resendCode(listMentee.Id)"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <ngb-pagination class="d-flex justify-content-center" [collectionSize]="totalItem" [pageSize]="limit" [(page)]="page"
    [maxSize]="5" [boundaryLinks]="true" (pageChange)="onChangePage($event)"></ngb-pagination>
</div>
<!-- modal add mentee-->
<app-modal-basic #modalAddMentee>
    <div class="app-modal-header">
        <h4 class="modal-title">Add client</h4>
        <button type="button" class="close basic-close" (click)="modalAddMentee.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="app-modal-body">
        <div class="container form-add-client">
          <form class="form" [formGroup]="addClientForm">
            <div class="row">
              <label class="col-sm-6 col-lg-2 col-form-label">First name:</label>
              <div class="col-sm-8 col-lg-10">
                <div class="input-group">
                  <input type="text" class="form-control" formControlName="firstName" placeholder="First name">
                </div>
              </div>
              <p class="error-text" *ngIf="addClientForm.controls.firstName.touched && !addClientForm.controls.firstName.valid">This
                field is required.</p>
            </div>
    
            <div class="row">
              <label class="col-sm-6 col-lg-2 col-form-label">Sur name:</label>
              <div class="col-sm-8 col-lg-10">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Sur name" formControlName="surName">
                </div>
              </div>
              <p class="error-text" *ngIf="addClientForm.controls.surName.touched && !addClientForm.controls.surName.valid">This
                field is required.</p>
            </div>
    
            <div class="form-group row">
              <label class="col-sm-2">Gender:</label>
              <div class="col-sm-10">
                <div class="form-radio">
                  <div class="radio radiofill radio-primary radio-inline">
                    <label>
                      <input type="radio" value="free" formControlName="gender">
                      <i class="helper"></i>Male
                    </label>
                  </div>
                  <div class="radio radiofill radio-primary radio-inline">
                    <label>
                      <input type="radio" value="personal" formControlName="gender">
                      <i class="helper"></i>FeMale
                    </label>
                  </div>
                </div>
                <div class="messages text-danger" *ngIf="addClientForm.controls.gender.errors?.required && addClientForm.controls.gender.touched">Member
                  can't be blank</div>
              </div>
            </div>
            <div class="row">
              <label class="col-sm-5 col-lg-2 col-form-label">Email:</label>
              <div class="col-sm-8 col-lg-10">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="abc@gmail.com" formControlName="email">
                </div>
              </div>
              <p class="error-text" *ngIf="addClientForm.hasError('email', 'email') && addClientForm.get('email').touched">
                Email is invalid.
              </p>
            </div>
            <div class="row">
              <label class="col-sm-6 col-lg-2 col-form-label">Confirm email:</label>
              <div class="col-sm-8 col-lg-10">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="abc@gmail.com" formControlName="confirmEmail">
                </div>
              </div>
              <div class="col-sm-8 col-lg-10">
                  <span *ngIf="addClientForm.controls.confirmEmail.touched && !addClientForm.controls.confirmEmail.valid" class="error-text">
                      {{ 'Confirm email is required' }}
                    </span>
                </div>
                <div class="col-sm-8 col-lg-10">
                    <span *ngIf="addClientForm.controls.confirmEmail.touched && addClientForm.errors?.mismatchedEmail" class="error-text">
                        {{ "Email doesn't match" }}
                      </span>
                  </div>
            </div>
            <div class="row">
              <label class="col-sm-6 col-lg-2 col-form-label">Password:</label>
              <div class="col-sm-8 col-lg-10">
                <div class="input-group">
                  <input type="password" class="form-control" formControlName="password">
                </div>
              </div>
              <p class="error-text" *ngIf="addClientForm.controls.password.touched && !addClientForm.controls.password.valid">This
                field is required.</p>
            </div>
            <div class="row">
              <label class="col-sm-5 col-lg-2 col-form-label">Confirm password:</label>
              <div class="col-sm-8 col-lg-10">
                <div class="input-group">
                  <input type="password" class="form-control" formControlName="confirmPassword">
                </div>
              </div>
              <p *ngIf="addClientForm.controls.confirmPassword.valid && addClientForm.errors?.mismatchedPassword" class="error-text">
                Passwords don't match
              </p>
              <p *ngIf="addClientForm.controls.confirmPassword.touched && !addClientForm.controls.confirmPassword.valid"
                class="error-text">
                Confirm password is required
              </p>
            </div>
    
            <div class="row">
              <label class="col-sm-5 col-lg-2 col-form-label">Date of Birth:</label>
              <div class="col-sm-8 col-lg-10">
                <div class="input-group">
                  <input type="date" class="form-control" placeholder="2/2/1998" formControlName="dateOfBirth">
                </div>
              </div>
              <p class="error-text" *ngIf="addClientForm.controls.dateOfBirth?.invalid && addClientForm.controls.dateOfBirth?.touched">This
                field is required.</p>
            </div>
            <div class="row">
              <label class="col-sm-5 col-lg-2 col-form-label">Contact number:</label>
              <div class="col-sm-8 col-lg-10">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="123456789" formControlName="contactNumber">
                </div>
              </div>
            </div>
            <div class="row">
              <label class="col-sm-5 col-lg-2 col-form-label">Date of Birth:</label>
              <div class="col-sm-8 col-lg-10">
                <div class="input-group">
                  <select class="form-control custom-select" formControlName="countryId">
                    <option value="">Country</option>
                    <option *ngFor="let countries of countries" [value]="countries.Id">{{countries.Name}}</option>
                  </select>
                </div>
              </div>
              <p class="error-text" *ngIf="addClientForm.controls.countryId?.invalid && addClientForm.controls.countryId?.touched">This
                field is required.</p>
            </div>
            <div class="row">
              <label class="col-sm-5 col-lg-2 col-form-label">Notes:</label>
              <div class="col-sm-8 col-lg-10">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="abc" formControlName="note">
                </div>
              </div>
            </div>
            <div class="app-modal-footer">
              <button type="button" class="btn btn-default ripple" (click)="modalAddMentee.hide()">Close</button>
              <button type="button" class="btn btn-danger ripple light" (click)="addNewMentee()" [disabled]="addClientForm.invalid || addClientForm.hasError('mismatchedPassWord')">Confirm</button>
            </div>
          </form>
        </div>
      </div>
</app-modal-basic>
<app-modal-basic #modalDelete>
  <div class="app-modal-header">
    <h4 class="modal-title">Confirm</h4>
    <button type="button" class="close basic-close" (click)="modalDelete.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="app-modal-body">
    <p>{{deleteFlag?.Email}}</p>
    <p>All data of this client will be deleted. Are you sure you want to delete this client?</p>
  </div>
  <div class="app-modal-footer">
    <button type="button" class="btn btn-default ripple" (click)="modalDelete.hide()">Close</button>
    <button type="button" class="btn btn-danger ripple light" (click)="deleteMentee()">Delete</button>
  </div>
</app-modal-basic>
<toast #toast></toast>
